<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Member | Enactus FTU Hanoi</title>
  <link href="/icon.png"rel="icon" type="image/png"/>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="https://madewithgsap.com/assets/landing/style.css" />
  <link rel="stylesheet" class="effect-file" href="https://madewithgsap.com/file-access?css=000" />
  <link rel="stylesheet" href="https://madewithgsap.com/assets/tutorial/prism.css" />

</head>

<body class="effect">

  <!-- Intro Animation Placeholder -->
  <div class="intro intro-first pf" aria-hidden="true"></div>

  <!-- Main Effect Section -->
  <main>
    <section class="mwg_effect000">
      <div class="medias">
        <!-- Media Thumbnails -->
        <div class="media"><img src="https://madewithgsap.com/effects/000/assets/medias/01.png" alt="Effect frame 01" /></div>
        <div class="media"><img src="https://madewithgsap.com/effects/000/assets/medias/02.png" alt="Effect frame 02" /></div>
        <div class="media"><img src="https://madewithgsap.com/effects/000/assets/medias/03.png" alt="Effect frame 03" /></div>
        <div class="media"><img src="https://madewithgsap.com/effects/000/assets/medias/04.png" alt="Effect frame 04" /></div>
        <div class="media"><img src="https://madewithgsap.com/effects/000/assets/medias/05.png" alt="Effect frame 05" /></div>
        <div class="media"><img src="https://madewithgsap.com/effects/000/assets/medias/06.png" alt="Effect frame 06" /></div>
        <div class="media">
            <a href="/login.html">
                <img src="https://madewithgsap.com/effects/000/assets/medias/07.png" alt="Login" />
            </a>
        </div>
        <div class="media"><img src="https://madewithgsap.com/effects/000/assets/medias/08.png" alt="Effect frame 08" /></div>
        <div class="media"><img src="https://madewithgsap.com/effects/000/assets/medias/09.png" alt="Effect frame 09" /></div>
        <div class="media"><img src="https://madewithgsap.com/effects/000/assets/medias/10.png" alt="Effect frame 10" /></div>
        <div class="media"><img src="https://madewithgsap.com/effects/000/assets/medias/11.png" alt="Effect frame 11" /></div>
        <div class="media"><img src="https://madewithgsap.com/effects/000/assets/medias/12.png" alt="Effect frame 12" /></div>
      </div>
      <div class="mess-mob mono">
        <p class="backdrop">
          Mouse-related effects are not optimized for touch devices.<br />
          <a href="https://madewithgsap.com/go-further">See how to deactivate it on mobile</a>
        </p>
      </div>
    </section>
  </main>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
    import {
      getFirestore,
      collection,
      addDoc,
      getDocs,
      updateDoc,
      deleteDoc,
      doc,
      query,
      where
    } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDuTvBn8Xl01DYddVXQ7M0L24K3l-GyG0c",
      authDomain: "enactusftuhanoi-tracuu.firebaseapp.com",
      projectId: "enactusftuhanoi-tracuu",
      storageBucket: "enactusftuhanoi-tracuu.appspot.com",
      messagingSenderId: "611356979403",
      appId: "1:611356979403:web:2c9a4cffb2b323ce3deb4e"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    onAuthStateChanged(auth, async (user) => {
      if (!user) {
        window.location.href = "/login.html";
        return;
      }

      const userEmail = user.email;
      if (!userEmail) {
        alert("Tài khoản chưa có email, không thể xác thực quyền admin.");
        window.location.href = "/login.html";
        return;
      }

      try {
        const q = query(collection(db, "employees"), where("email", "==", userEmail));
        const snapshot = await getDocs(q);

        if (snapshot.empty) {
          alert("Không tìm thấy thông tin người dùng.");
          window.location.href = "/login.html";
          return;
        }

        const userData = snapshot.docs[0].data();
        if (userData.role === "Admin") {
          document.getElementById("adminPage").classList.remove("hidden");
          await loadEmployees();
        } else {
          alert("Bạn không có quyền truy cập trang này.");
          window.location.href = "/login.html";
        }
      } catch (error) {
        console.error("Lỗi khi kiểm tra quyền admin:", error);
        alert("Có lỗi xảy ra. Vui lòng thử lại sau.");
        window.location.href = "/login.html";
      }
    });

  <!-- Scripts -->
  <script src="https://madewithgsap.com/assets/landing/gsap.js"></script>
  <script src="https://madewithgsap.com/assets/landing/scrolltrigger.js"></script>
  <script src="https://madewithgsap.com/assets/landing/customease.js"></script>
  <script src="https://madewithgsap.com/assets/landing/lenis.js"></script>
  <script src="https://madewithgsap.com/assets/tutorial/prism.js"></script>
  <script src="https://madewithgsap.com/assets/landing/InertiaPlugin.min.js"></script>
  <script class="effect-file" src="https://madewithgsap.com/file-access?js=000"></script>
  <script src="https://madewithgsap.com/assets/landing/app2.js"></script>
</script>
</body>
</html>